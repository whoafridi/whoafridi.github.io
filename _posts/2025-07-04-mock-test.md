---
layout: post
title: React ржЯрзЗрж╕рзНржЯрзЗ API ржХрж▓ ржоржХ ржХрж░рж╛
subtitle: рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржЬрж╛ржирзБржи
tags: [javascript, react, testing]
permalink: /react-mocking-api/
---

React ржХржорзНржкрзЛржирзЗржирзНржЯ ржпржЦржи **API ржХрж▓** ржХрж░рзЗ, рждржЦржи рж╕рж░рж╛рж╕рж░рж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржмрж╛ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗрж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рж▓рзЗ ржЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ ржЕржирзЗржХ рж╕ржорзЯ unstable рж╣рзЯрзЗ ржпрж╛рзЯред
ржХржЦржирзЛ API ржбрж╛ржЙржи, ржХржЦржирзЛ ржбрзЗржЯрж╛ ржмржжрж▓рзЗ ржЧрзЗржЫрзЗ тАФ ржлрж▓рзЗ ржЯрзЗрж╕рзНржЯ ржлрзЗржЗрж▓! ЁЯШй

ржПржЗ ржЭрж╛ржорзЗрж▓рж╛ ржПрзЬрж╛ржирзЛрж░ ржЬржирзНржпржЗ ржЖржорж░рж╛ **API ржоржХрж┐ржВ (Mocking)** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред
ржорж╛ржирзЗ, ржЖрж╕рж▓ API ржХрж▓ ржирж╛ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐ржЬрзЗрж░ ржорждрзЛ ржХрж░рзЗ ржПржХржЯрж╛ тАЬржиржХрж▓тАЭ (mocked) рж░рзЗрж╕ржкржирзНрж╕ ржмрж╛ржирж╛ржЗред
ржПрждрзЗ ржЯрзЗрж╕рзНржЯ рж╕ржмрж╕ржорзЯ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржпржнрж╛ржмрзЗ ржЪрж▓рзЗ, ржХрзЛржирзЛ ржмрж╛ржЗрж░рзЗрж░ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рждрзЗ рж╣рзЯ ржирж╛ред

ржПржЗ ржЧрж╛ржЗржбрзЗ ржЖржорж┐ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржжрзЗржЦрж╛ржмрзЛ тАФ
React Testing Library ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзАржнрж╛ржмрзЗ рж╕рж╣ржЬржнрж╛ржмрзЗ API ржХрж▓ ржоржХ ржХрж░рж╛ ржпрж╛рзЯред

## ЁЯзй ржзрж╛ржк рзз: ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛

ржкрзНрж░ржержорзЗ ржжрзБржЯрж┐ ржкрзНржпрж╛ржХрзЗржЬ рж▓рж╛ржЧржмрзЗ тАФ

- `@testing-library/react`
- `msw` (Mock Service Worker)

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ рж░рж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗ ЁЯСЗ

```bash
npm install --save-dev @testing-library/react msw
```

## тЪЩя╕П ржзрж╛ржк рзи: Mock Service Worker (MSW) рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЯржЖржк ржХрж░рж╛

ржПржЦржи `src/setupTests.js` ржирж╛ржорзЗ ржПржХржЯрж╛ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рждрзЗ рж╣ржмрзЗред
ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ ржЯрзЗрж╕рзНржЯрзЗрж░ ржЬржирзНржп ржоржХ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЯ ржХрж░ржмред

```jsx
// src/setupTests.js
import { setupServer } from "msw/node";
import { handlers } from "./mocks/handlers";

// рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржжрж┐рзЯрзЗ рж╕рж╛рж░рзНржнрж╛рж░ рждрзИрж░рж┐
const server = setupServer(...handlers);

// ржЯрзЗрж╕рзНржЯ рж╢рзБрж░рзБрж░ ржЖржЧрзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржХрж░рзЛ
beforeAll(() => server.listen());

// ржЯрзЗрж╕рзНржЯ рж╢рзЗрж╖рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржмржирзНржз ржУ рж░рж┐рж╕рзЗржЯ ржХрж░рзЛ
afterAll(() => server.resetHandlers(), server.close());
```

## ЁЯза ржзрж╛ржк рзй: Request Handler рждрзИрж░рж┐ ржХрж░рж╛

ржПржЦржи ржПржХржЯрж╛ ржирждрзБржи ржлрзЛрж▓рзНржбрж╛рж░ ржмрж╛ржирж╛ржУ тАФ `src/mocks`
ржПрж░ ржнрзЗрждрж░рзЗ `handlers.js` ржирж╛ржорзЗ ржлрж╛ржЗрж▓ рж░рж╛ржЦрзЛред
ржПржЗ ржлрж╛ржЗрж▓рзЗржЗ ржерж╛ржХржмрзЗ рждрзЛржорж╛рж░ рж╕ржм ржоржХржб API ржХрж▓рзЗрж░ рж╕ржВржЬрзНржЮрж╛ред

```js
// src/mocks/handlers.js
import { rest } from "msw";

export const handlers = [
  rest.get("/api/data", (req, res, ctx) => {
    // рж╕ржлрж▓ ржоржХржб рж░рзЗрж╕ржкржирзНрж╕ ржлрзЗрж░ржд ржжрж┐ржЪрзНржЫрзЗ
    return res(ctx.status(200), ctx.json({ data: "Mocked response" }));
  }),
];
```

## ЁЯзк ржзрж╛ржк рзк: ржЯрзЗрж╕рзНржЯрзЗ Mocked API ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛

ржПржЦржи ржЯрзЗрж╕рзНржЯ ржлрж╛ржЗрж▓рзЗ React Testing Library ржЖрж░ MSW ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ API ржХрж▓ ржоржХ ржХрж░рзЛред

```js
import { render, screen } from "@testing-library/react";
import { rest } from "msw";
import { setupServer } from "msw/node";
import YourComponent from "./YourComponent";

const server = setupServer(
  rest.get("/api/data", (req, res, ctx) => {
    return res(ctx.status(200), ctx.json({ data: "Mocked response" }));
  })
);

beforeAll(() => server.listen());
afterAll(() => server.close());

test("API ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржжрзЗржЦрж╛рзЯ", async () => {
  render(<YourComponent />);
  const dataElement = await screen.findByText("Mocked response");
  expect(dataElement).toBeInTheDocument();
});
```

## тЦ╢я╕П ржзрж╛ржк рзл: ржЯрзЗрж╕рзНржЯ ржЪрж╛рж▓рж╛ржУ ЁЯЪА

рж╕ржм рж╕рзЗржЯржЖржк рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ ржПржЦржи рж╢рзБржзрзБ ржЯрзЗрж╕рзНржЯ рж░рж╛ржи ржХрж░рзЛ:

```bash
npm test
```

Mock рж╕рж╛рж░рзНржнрж╛рж░ рждрзЛржорж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЗржирзНржЯрж╛рж░рж╕рзЗржкрзНржЯ ржХрж░ржмрзЗ ржПржмржВ ржкрзВрж░рзНржмржирж┐рж░рзНржзрж╛рж░рж┐ржд рж░рзЗрж╕ржкржирзНрж╕ ржжрзЗржмрзЗред
ржПржнрж╛ржмрзЗ рждрзБржорж┐ ржХрзЛржирзЛ **рж▓рж╛ржЗржн API** ржЫрж╛рзЬрж╛ржЗ рждрзЛржорж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ тАФ
ржжрзНрж░рзБржд, ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржпржнрж╛ржмрзЗ, ржПржмржВ ржмрж╛рж░ржмрж╛рж░!

## ЁЯОп ржЙржкрж╕ржВрж╣рж╛рж░

React Testing Library ржЖрж░ Mock Service Worker ржПржХрж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ
рждрзБржорж┐ ржЦрзБржм рж╕рж╣ржЬрзЗржЗ рждрзЛржорж╛рж░ ржЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ ржмрж╛рж╕рзНрждржм API ржерзЗржХрзЗ **ржкрзБрж░рзЛржкрзБрж░рж┐ ржЖрж▓рж╛ржжрж╛** рж░рж╛ржЦрждрзЗ ржкрж╛рж░ржмрзЗред

ржПржЗ ржкржжрзНржзрждрж┐рждрзЗ рждрзБржорж┐ ржкрж╛рж░ржмрзЗ тАФ

тЬЕ ржоржХ рж╕рж╛рж░рзНржнрж╛рж░ рждрзИрж░рж┐ ржХрж░рждрзЗ
тЬЕ API рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржбрж┐ржлрж╛ржЗржи ржХрж░рждрзЗ
тЬЕ ржПржмржВ ржЯрзЗрж╕рзНржЯрзЗ ржоржХржб рж░рзЗрж╕ржкржирзНрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ

ржлрж▓рзЗ рждрзБржорж┐ ржмрж┐ржнрж┐ржирзНржи **рж░рзЗрж╕ржкржирзНрж╕ ржУ ржПржЬ ржХрзЗрж╕** ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ,
ржХрзЛржирзЛ ржмрж╛рж╕рзНрждржм рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╣рж┐ржЯ ржирж╛ ржХрж░рзЗржЗред

**Happy Testing! ЁЯОЙ**
